{% macro filelist(files) %}
    <div class="list-cards">
        {% for file in files %}
        <div class="card list-item">
            <div class="card-body d-flex align-items-start">
                <a href="{{ url_for('bepasty.display', name=file['id']) }}" class="me-3 mb-3">
                    <img src="{{ url_for('bepasty.thumbnail', name=file['id']) }}" class="list-thumb" alt="thumbnail">
                </a>
                <div class="flex-grow-1 d-flex flex-column">
                    <div class="mb-2">
                        <h2 class="h5 m-0">
                            <a href="{{ url_for('bepasty.display', name=file['id']) }}">{{ file['filename'] }}</a>
                        </h2>
                    </div>
                    <div class="d-flex justify-content-between align-items-end flex-wrap">
                        <div class="small text-muted me-3">
                            <div>
                                <strong>Type:</strong> {{ file['type'] }}
                                <span class="ms-3"><strong>Size:</strong> {{ file['size'] }} B</span>
                            </div>
                            <div class="mt-1">
                                <strong>Uploaded (UTC):</strong> {{ file['timestamp-upload'] | datetime }}
                            </div>
                            <div>
                                <strong>Downloaded (UTC):</strong>
                                {% if file['timestamp-download'] %}
                                    {{ file['timestamp-download'] | datetime }}
                                {% else %}
                                    never
                                {% endif %}
                            </div>
                        </div>
                        <div class="btn-group flex-wrap flex-md-nowrap" role="group">
                            <a href="{{ url_for('bepasty.display', name=file['id']) }}" class="btn btn-sm btn-info" role="button">Display</a>
                            <a href="{{ url_for('bepasty.download', name=file['id']) }}" class="btn btn-sm btn-info" role="button">Download</a>
                            <a href="{{ url_for('bepasty.inline', name=file['id']) }}" class="btn btn-sm btn-info" role="button">Inline</a>
                            {% if may(DELETE) %}
                                <form action="{{ url_for('bepasty.delete', name=file['id']) }}" method="post" class="btn-group">
                                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                                </form>
                            {% endif %}
                            {% if may(ADMIN) %}
                            {% if not file['locked'] %}
                                <form action="{{ url_for('bepasty.lock', name=file['id']) }}" method="post" class="btn-group">
                                    <button type="submit" class="btn btn-sm btn-danger">Lock</button>
                                </form>
                            {% else %}
                                <form action="{{ url_for('bepasty.unlock', name=file['id']) }}" method="post" class="btn-group">
                                    <button type="submit" class="btn btn-sm btn-info">Unlock</button>
                                </form>
                            {% endif %}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
{% endmacro %}

{% macro input_filename(value) -%}
    <input class="form-control" type="text" id="filename" name="filename" size="40" placeholder="optional download-filename"{% if value is defined %} value="{{ value }}"{% endif %}>
{%- endmacro %}

{% macro input_contenttype(value) -%}
    <input class="form-control" type="text" id="contenttype" name="contenttype" size="30" placeholder="Content-Type"{% if value is defined %} value="{{ value }}"{% endif %}>
{%- endmacro %}

{% macro contenttype_autocomplete(selector, contenttypes) -%}
    var availableTypes = ["{{ contenttypes | join('","') | safe}}"];
    {{ selector|safe }}.autocomplete({source: availableTypes});
{%- endmacro %}
